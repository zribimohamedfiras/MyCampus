{"version":3,"sources":["../../src/pages/cafeteria/StudentCafeteria/products/products.module.ts","../../src/pages/cafeteria/StudentCafeteria/products/products.ts"],"names":[],"mappings":"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","file":"37.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProductsPage } from './products';\n\n@NgModule({\n  declarations: [\n    ProductsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProductsPage),\n  ],\n})\nexport class ProductsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/products/products.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events,  ModalController , AlertController} from 'ionic-angular';\nimport {  ProductListService} from '../../../../servicesCafeteria/product-list/product-list.service';\nimport {  ToastService} from '../../../../servicesCafeteria/toast.service';\nimport { Observable } from 'rxjs/Observable';\nimport { Product } from '../../../../models/product.model';\nimport firebase from 'firebase';\n/**\n * Generated class for the ProductsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-products',\n  templateUrl: 'products.html',\n})\nexport class ProductsPage {\n\n  sideMenuContent: {name: string, path: string}[] = [\n    {name: 'Gestion Produits', path: 'GestionProduitPage'},\n    {name: 'Accueil', path: 'CafeteriaHomePage'},\n    {name: 'Mon compte', path: 'AccountPage'}\n];\n\nsale:boolean;\nlength: number;\nproductList$ : Observable <Product[]>;\nproducts: Product[] = [];\ncategory:string;\ntype:string;\n\n\n\nconstructor(\npublic navCtrl: NavController,\npublic navParams: NavParams,\nprivate product:ProductListService,\nprivate toast:ToastService,\npublic events: Events,\nprivate modal: ModalController,\nprivate alertCtrl: AlertController,) {\n    \n        this.setupSideMenuContent();\n        this.category=this.navParams.data.category;\n        this.type=this.navParams.data.type;\n    \n}\nsetupSideMenuContent() {\nthis.events.publish('sideMenu:changeContent', this.sideMenuContent);\n}\n\n\n\nngOnInit() {\n    this.length = 0;\n    this.sale = false;\n\n    this.product\n        .getProductList()//db list\n        .snapshotChanges()//key and value\n        //foreach changes return an object \n        .map(changes => {\n            return changes.map(c => ({\n                key: c.payload.key, ...c.payload.val()\n            }))\n        }).subscribe(\n        res => {\n            this.products = res;\n            console.log(this.length);\n            for (let i = 0; i < this.products.length; i++) {\n                if (this.products[i].category !==this.category || this.products[i].type !== this.type) {\n                    this.products.splice(i, 1);\n                    i--;\n                } \n            }\n            this.length = this.products.length;\n            console.log(this.products);\n        },\n        error => {\n            console.log('error');\n        });\n}\n\n\n\n\nionViewDidLoad() {\n\n}\n\npromotion:boolean;\n\nonSale()\n{\nthis.sale=!this.sale;\nconsole.log('Cucumbers new state:' + this.promotion);\n}\n\n\n\nCommenter(p)\n{\n    const myData= {\n        name: p.name,\n        key: p.key\n      };\n const myModal= this.modal.create('ModalCommentaireCafeteriaPage'\n , {data: myData}, { cssClass: 'my-popup-modal' });\n  myModal.present();\n\n}\n\nReserver(p){\n    const myData= {\n        name: p.name,\n        price: p.price,\n        onSale: p.onSale,\n        priceOnSale: p.priceOnSale\n      };\n     \n const myModal= this.modal.create('ModalCommentaireCafeteriaPage'\n , {data: myData}, { cssClass: 'alertcss' });\n  myModal.present();\n\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/products/products.ts"],"sourceRoot":""}