{"version":3,"sources":["../../src/pages/cafeteria/StudentCafeteria/modal-commentaire-cafeteria/modal-commentaire-cafeteria.module.ts","../../src/pages/cafeteria/StudentCafeteria/modal-commentaire-cafeteria/modal-commentaire-cafeteria.ts"],"names":[],"mappings":"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","file":"41.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ModalCommentaireCafeteriaPage } from './modal-commentaire-cafeteria';\n\n@NgModule({\n  declarations: [\n    ModalCommentaireCafeteriaPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ModalCommentaireCafeteriaPage),\n  ],\n})\nexport class ModalCommentaireCafeteriaPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/modal-commentaire-cafeteria/modal-commentaire-cafeteria.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams ,ViewController, Modal, ModalController, DateTime } from 'ionic-angular';\nimport { Panier } from '../../../../models/panier.model';\nimport { Product} from '../../../../models/product.model';\nimport {  PanierListService} from '../../../../servicesCafeteria/product-list/panier-list-service';\nimport {  ToastService} from '../../../../servicesCafeteria/toast.service';\nimport {  ProductListService} from '../../../../servicesCafeteria/product-list/product-list.service';\nimport { Observable } from 'rxjs/Observable';\n\n/**\n * Generated class for the ModalCommentaireCafeteriaPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-modal-commentaire-cafeteria',\n  templateUrl: 'modal-commentaire-cafeteria.html',\n})\nexport class ModalCommentaireCafeteriaPage {\n\n  length: number;\n  productList$ : Observable <Product[]>;\n  products: Product[] = [];\n  data:any;\n  currentDate;\n  paniers: Panier[]=[];\n  listPaniers:any=[];\n  \n\n  p: Panier = {\n    userID:undefined,\n    productID:undefined,\n    supplements:undefined,\n    time:undefined,\n    quantity:undefined,\n    note:undefined,\n    status:undefined,\n    date:undefined,\n    price:undefined,\n    \n    \n  };\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    private view : ViewController,private modal: ModalController,\n    private panier:PanierListService, private toast:ToastService,\n    private product:ProductListService,) {\n      this.length = 0;\n      \n      this.product\n          .getProductList()//db list\n          .snapshotChanges()//key and value\n          //foreach changes return an object \n          .map(changes => {\n              return changes.map(c => ({\n                  key: c.payload.key, ...c.payload.val()\n              }))\n          }).subscribe(\n          res => {\n              this.products = res;\n              console.log(this.length);\n              for (let i = 0; i < this.products.length; i++) {\n                  if (this.products[i].category !==\"fastfood\" || this.products[i].type !== \"supplements\") {\n                      this.products.splice(i, 1);\n                      i--;\n                  } \n              }\n             /* console.log(this.listPaniers);\n              for (let i = 0; i < this.products.length; i++) {\n                \n                for (let j = 0; j < this.listPaniers.length; j++) {\n                  console.log('amaaan');\n                  if (this.products[i].name==this.listPaniers[j])\n                      this.listPaniers.splice(i, 1);\n                      console.log('amaaan');\n                      j--;\n                }\n              }\n              this.length = this.products.length;\n              console.log(this.products);\n              console.log(\"woh\");\n              console.log(this.listPaniers);*/\n              \n          },\n          error => {\n              console.log('error');\n          });\n         \n          this.getFormattedDate();\n          \n  }\n  ionViewWillLoad()\n  {\n    this.data =this.navParams.get('data');\n    console.log(this.data.name);\n  } \n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ModalCommentaireCafeteriaPage');\n   \n  }\n\n  closeModal(){\n    this.view.dismiss();\n  }\n\n  getFormattedDate(){\n    var ob= new Date()\n    var year = ob.getFullYear().toString()\n    var month = ob.getMonth().toString()\n    var day = ob.getDay().toString()\n    this.currentDate= year + '-'+ month + '-' + day;\n    }\n  \n  onAdd(p){\n /*   var prices:any =[];\n    var names: any=[];\n    var j=0\n    for (let i = 0; i < this.keys.length; i++) {\n      for (let k = 0; k < this.products.length; k++){\n      if (this.products[k].key == this.keys[i]) {\n          console.log('1');\n          prices[j]=this.products[k].price;\n          console.log('2');\n          console.log(this.products[k].price)\n          j++;\n      } \n    }\n  }\n  for (let i = 0; i < this.keys.length; i++) {\n    for (let k = 0; k < this.products.length; k++){\n    if (this.products[k].key == this.keys[i]) {\n        console.log('1');\n        names[j]=this.products[k].name;\n        console.log('2');\n        console.log(this.products[k].name)\n        j++;\n    } \n  }\n  }*/\n   p.userID=\"chelbi.ghofrane@gmail.com\";\n   p.status=\"En attente\";\n   p.productID=this.data.name;\n   p.date=this.currentDate;\n\n   if(this.data.onSale){\n     p.price=this.data.priceOnSale;\n   }\n   else{\n     p.price= this.data.price;\n   }\n   this.panier.addItem(p).then(ref=>{\n   this.toast.show(`Article ajoute avec succes!`)\n   this.navCtrl.setRoot('PanierPage',{key : ref.key})\n });\n  }\n\nContinnuerShop(o){\n  o.userID=\"chelbi.ghofrane@gmail.com\";\n   o.status=\"En attente\";\n   o.productID=this.data.s;\n   o.date=this.currentDate;\n   if(this.data.onSale){\n    o.price=this.data.priceOnSale;\n  }\n  else{\n    o.price= this.data.price;\n  }\n   this.panier.addItem(o).then(ref=>{\n   this.toast.show(`Article ajoute avec succes!`)\n   this.navCtrl.pop()\n });\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/modal-commentaire-cafeteria/modal-commentaire-cafeteria.ts"],"sourceRoot":""}