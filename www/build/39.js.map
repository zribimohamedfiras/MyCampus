{"version":3,"sources":["../../src/pages/cafeteria/StudentCafeteria/panier/panier.module.ts","../../src/pages/cafeteria/StudentCafeteria/panier/panier.ts"],"names":[],"mappings":"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","file":"39.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { PanierPage } from './panier';\n\n@NgModule({\n  declarations: [\n    PanierPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(PanierPage),\n  ],\n})\nexport class PanierPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/panier/panier.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport {  PanierListService} from '../../../../servicesCafeteria/product-list/panier-list-service';\nimport {  ToastService} from '../../../../servicesCafeteria/toast.service';\nimport { Observable } from 'rxjs/Observable';\nimport { AfterViewInit } from '@angular/core';\nimport { Panier } from '../../../../models/panier.model';\nimport {  ProductListService} from '../../../../servicesCafeteria/product-list/product-list.service';\nimport { Product } from '../../../../models/product.model';\nimport { Order } from '../../../../models/order.model';\nimport {  OrderListService} from '../../../../servicesCafeteria/product-list/order-list-service';\n/**\n * Generated class for the PanierPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-panier',\n  templateUrl: 'panier.html',\n})\nexport class PanierPage {\n\n  sideMenuContent: {name: string, path: string}[] = [\n    {name: 'Gestion Produits', path: 'GestionProduitPage'},\n    {name: 'Accueil', path: 'CafeteriaHomePage'},\n    {name: 'Mon compte', path: 'AccountPage'}\n];\n\n\nlength: number;\npaniersList$ : Observable <Panier[]>;\npaniers: Panier[] = [];\nproducts: Product[] = [];\ntotalPrice:number;\nsupplements:any=[];\nSuppPanier:any[]=[];\nSuppProduct:any[]=[];\ncurrentDate;\n\no: Order = {\n    userID: undefined,\n    panier: undefined,\n    dateOrder: undefined,\n    status:undefined\n};\nconstructor(\npublic navCtrl: NavController,\npublic navParams: NavParams,\nprivate panier:PanierListService,\nprivate product:ProductListService,\nprivate order:OrderListService,\nprivate toast:ToastService,\npublic events: Events) {\n    \n    this.setupSideMenuContent();   \n    this.getFormattedDate();\n    \n    \n}\nsetupSideMenuContent() {\nthis.events.publish('sideMenu:changeContent', this.sideMenuContent);\n}\n\ngetFormattedDate(){\n    var ob= new Date()\n    var year = ob.getFullYear().toString()\n    var month = ob.getMonth().toString()\n    var day = ob.getDay().toString()\n    this.currentDate= year + '-'+ month + '-' + day;\n    }\n\nngOnInit() {\n    this.length = 0;\n    this.totalPrice=0;\n    var prices=0;\n    this.panier\n        .getPanierList()//db list\n        .snapshotChanges()//key and value\n        //foreach changes return an object \n        .map(changes => {\n            return changes.map(c => ({\n                key: c.payload.key, ...c.payload.val()\n            }))\n        }).subscribe(\n        res => {\n            this.paniers = res;\n            for (let pan of this.paniers) {\n                console.log(pan);\n                for(let price of pan.supplements){\n                    this.totalPrice= this.totalPrice *1 + price.priceSupp *pan.quantity;           \n                }    \n               this.totalPrice= this.totalPrice *1 + pan.price * pan.quantity;\n            }          \n        },\n        error => {\n            console.log('error');\n        });\n\n        this.product\n        .getProductList()//db list\n        .snapshotChanges()//key and value\n        //foreach changes return an object \n        .map(changes => {\n            return changes.map(c => ({\n                key: c.payload.key, ...c.payload.val()\n            }))\n        }).subscribe(\n        res => {\n            this.products = res;\n            console.log(this.length);\n            for (let i = 0; i < this.products.length; i++) {\n                if (this.products[i].category !==\"fastfood\" || this.products[i].type !== \"supplements\") {\n                    this.products.splice(i, 1);\n                    i--;\n                } \n            }\n       \n        },\n        error => {\n            console.log('error');\n        });\n       \n       \n          \n}\n\naccordionClick(event: any, index: number,p:Panier) {\n    console.log(p.supplements.length);\n    \n    /*for(let pan of p.supplements){\n        for (let i = 0; i < this.products.length; i++) {\n            if (this.products[i].name==pan.nameSupp){\n                this.products.splice(i, 1);\n                i--;\n                console.log(this.products);\n            }\n            else {\n                this.names.push(pan);\n                console.log('names');\n                console.log(this.names);\n            }\n    }\n\n}*/\nlet test : boolean;\nthis.SuppPanier=[];\nthis.SuppProduct=[];\nfor(let pro of this.products)\n{\n    test=false;\n    for(let pan of p.supplements)\n    {\n        if (pro.name==pan.nameSupp)\n        {\n            test=true;\n            break;\n        }\n    }\n    if(test)\n    {\n        this.SuppPanier.push(pro);\n    }\n    else\n    {\n        this.SuppProduct.push(pro);\n    }\n}\n    \n\n    let panel = <HTMLElement>document.getElementsByClassName('panel')[index];\n    console.log(panel);\n    event.target.classList.toggle('active');\n    if (panel.style.maxHeight) {\n        panel.style.maxHeight = null;\n    } else {\n        panel.style.maxHeight = panel.scrollHeight + 'px';\n    }\n}\n\n\nionViewDidLoad() {\n\n}\n\n\nshownGroup = null;\ntoggleGroup(group) {\nif (this.isGroupShown(group)) {\n    this.shownGroup = null;\n} else {\n    this.shownGroup = group;\n}\n};\nisGroupShown(group) {\nreturn this.shownGroup === group;\n};\n\n\n\n\n\nonRemove(p:Panier){\n  this.panier.remove(p).then(()=>{\n  this.toast.show(`Commande supprime avec succes!`);\n  this.navCtrl.setRoot('PanierPage');\n});\n}\n\n\nonEditItem(p: Panier){\nthis.panier.editItem(p);\nthis.toast.show(`Commande modifie avec succes!`);\nthis.navCtrl.setRoot('PanierPage');\n}\n\nOrder(){\n this.o.userID=\"chelbi.ghofrane@gmail.com\";\n this.o.status=\"en attente\";\n this.o.panier=this.paniers;\n this.o.dateOrder=this.currentDate;\n this.order.addItem(this.o);\n for (let pan of this.paniers) {\n         this.panier.remove(pan);\n    }\n    this.toast.show('commande envoye avec succes');\n    this.navCtrl.setRoot('OrdersPage');\n}\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/panier/panier.ts"],"sourceRoot":""}