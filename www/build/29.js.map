{"version":3,"sources":["../../src/pages/canteen/reservation/reservation.module.ts","../../src/pages/canteen/reservation/reservation.ts"],"names":[],"mappings":"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","file":"29.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ReservationPage } from './reservation';\n\n@NgModule({\n  declarations: [\n    ReservationPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ReservationPage),\n  ],\n})\nexport class ReservationPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/canteen/reservation/reservation.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events, LoadingController } from 'ionic-angular';\nimport { ReserverService } from '../../../services_canteen/reserver.service';\nimport { ToastService } from '../../../servicesCafeteria/toast.service';\n\n/**\n * Generated class for the ReservationPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n\n\n\nlet fromMonday = [],\ni = 0;\nfor (i; i < 7; i++) \n{\n  fromMonday.push(new Date(new Date().getFullYear(), new Date().getMonth(), new Date().getDate() + i));\n}\n\n@IonicPage()\n@Component({\n  selector: 'page-reservation',\n  templateUrl: 'reservation.html',\n})\nexport class ReservationPage {\n\n  \n\n  sideMenuContent: {name: string, path: string}[] = [\n    {name: 'Menu', path: 'MenuCanteenPage'},\n    {name: 'Feedback', path: 'FeedbackCanteenPage'},\n    {name: 'Mon compte', path: 'AccountPage'},\n    {name: 'MenuEtudiant', path: 'EtudiantMenuPage'}\n];\n\n\nreserveliste$: any;\ndemo: Array < Date > = fromMonday;\nreserveDate : any[];\nreservefiltre : any[];\nreservations : any;\nlastDate : any=this.demo[0];\n\n  constructor(public navCtrl: NavController, public navParams: NavParams,\n    public events: Events,public reservationservice:ReserverService\n  ,public toast: ToastService,public loadingCtrl:LoadingController) {\n    this.setupSideMenuContent();\n      console.log(this.demo);\n      \n      //loading \n      let loading = this.loadingCtrl.create({\n        content: 'Please wait...'\n      });\n    \n      loading.present();\n\n    this.reserveliste$ = this.reservationservice.getAllreservation()\n    .snapshotChanges().map( changes=>{\n      return changes.map( c=>({\n        key: c.payload.key, ...c.payload.val(),\n      }));\n    });\n    console.log(this.reserveliste$);\n    this.reserveliste$.subscribe((value)=>{\n      this.reservations=value;\n        //console.log(this.reservations);\n      for(let element of this.reservations)\n      {\n          //console.log(this.demo[0].getDate());\n          //console.log(new Date(element.meal).getDate());\n          if((new Date(element.meal).getFullYear()==this.demo[0].getFullYear())\n        &&(new Date(element.meal).getMonth()==this.demo[0].getMonth())\n        &&(new Date(element.meal).getDate()==this.demo[0].getDate()))\n        {\n          //console.log(\"if\");\n          if(this.reserveDate==null)\n          {\n            this.reserveDate =[];\n          }\n          this.reserveDate.push(element);\n          \n        }\n        \n      }\n      if(this.reservefiltre==null)\n        {\n          this.reservefiltre= [];\n        }\n        this.reservefiltre=this.reserveDate;\n        //console.log(this.reservefiltre);\n        //console.log(this.reserveDate);\n    })\n\n    loading.dismiss();\n\n  }\n\n  setupSideMenuContent() {\n    this.events.publish('sideMenu:changeContent', this.sideMenuContent);\n}\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad ReservationPage');\n  }\n\n  onSearchChange(searchValue : string ) { \n    let test : boolean;\n    if(searchValue!=null)\n    {\n      this.reservefiltre=[];\n    \n      for(let element of this.reserveDate)\n      {\n        test=true;\n        for(i=0;i<searchValue.length;i++)\n        {\n          if(searchValue.charAt(i).toLowerCase()!=element.userID.charAt(i).toLowerCase())\n          {\n            test=false;\n            break;\n          }\n  \n        }\n        if(test==true)\n        {\n          this.reservefiltre.push(element);\n        }\n      }\n      \n    }\n    else\n    {\n      this.reservefiltre=this.reserveDate;\n    }\n    \n   \n    console.log(searchValue);\n  }\n\n  changeDate(value :any)\n  {\n\n    this.reserveDate =[];\n\n    for(let element of this.reservations)\n      {\n          //console.log(value.getDate());\n          //console.log(new Date(element.meal).getDate());\n          if((new Date(element.meal).getFullYear()==new Date(value).getFullYear())\n        &&(new Date(element.meal).getMonth()==new Date(value).getMonth())\n        &&(new Date(element.meal).getDate()==new Date(value).getDate()))\n        {\n\n          this.reserveDate.push(element);\n          \n        }\n        \n      }\n\n      this.reservefiltre= [];\n      this.reservefiltre=this.reserveDate;\n      this.lastDate=value;\n\n    console.log(this.reserveDate);\n    console.log(new Date(value).getDate());\n  }\n\n  onRemove(res:any)\n  {\n    this.reservefiltre.splice(this.reservefiltre.indexOf(res),0);\n    this.reserveDate.splice(this.reserveDate.indexOf(res),0);\n    this.reservations.splice(this.reservations.indexOf(res),0);\n    res.datechack= new Date().toString();\n    res.checked= 'true';\n    this.reservationservice.editreservation(res).then(()=>{\n      this.toast.show(`${res.userID} servi !`);\n      this.changeDate(this.lastDate);\n      this.ionViewDidLoad();\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/canteen/reservation/reservation.ts"],"sourceRoot":""}