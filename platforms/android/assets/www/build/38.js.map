{"version":3,"sources":["../../src/pages/cafeteria/StudentCafeteria/product-details/product-details.module.ts","../../src/pages/cafeteria/StudentCafeteria/product-details/product-details.ts"],"names":[],"mappings":"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","file":"38.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ProductDetailsPage } from './product-details';\n\n@NgModule({\n  declarations: [\n    ProductDetailsPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ProductDetailsPage),\n  ],\n})\nexport class ProductDetailsPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/product-details/product-details.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, Events } from 'ionic-angular';\nimport { PanierListService } from '../../../../servicesCafeteria/product-list/panier-list-service';\nimport { ToastService } from '../../../../servicesCafeteria/toast.service';\nimport { Observable } from 'rxjs/Observable';\nimport { AfterViewInit } from '@angular/core';\nimport { Panier } from '../../../../models/panier.model';\nimport { ProductListService } from '../../../../servicesCafeteria/product-list/product-list.service';\nimport { Product } from '../../../../models/product.model';\nimport { Order } from '../../../../models/order.model';\nimport { OrderListService } from '../../../../servicesCafeteria/product-list/order-list-service';\n\n/**\n * Generated class for the ProductDetailsPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-product-details',\n  templateUrl: 'product-details.html',\n})\n\nexport class ProductDetailsPage {\n  p: any;\n  ord: any;\n\n  sideMenuContent: { name: string, path: string }[] = [\n    { name: 'Gestion Produits', path: 'GestionProduitPage' },\n    { name: 'Accueil', path: 'CafeteriaHomePage' },\n    { name: 'Mon compte', path: 'AccountPage' }\n  ];\n\n\n  orders: any[] = [];\n  totalPrice: number;\n  currentDate;\n  paniers: any[] = [];\n\n  o: Order = {\n    userID: undefined,\n    panier: undefined,\n    dateOrder: undefined,\n    status: undefined\n  };\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    private panier: PanierListService,\n    private product: ProductListService,\n    private order: OrderListService,\n    private toast: ToastService,\n    public events: Events) {\n    this.p = this.navParams.data.panier;\n    this.ord = this.navParams.data.order;\n    console.log('hedhi l panier');\n    console.log(this.p);\n    console.log('hedhi l order');\n    console.log(this.ord);\n\n    this.setupSideMenuContent();\n    this.getFormattedDate();\n\n\n  }\n  setupSideMenuContent() {\n    this.events.publish('sideMenu:changeContent', this.sideMenuContent);\n  }\n\n  getFormattedDate() {\n    var ob = new Date()\n    var year = ob.getFullYear().toString()\n    var month = ob.getMonth().toString()\n    var day = ob.getDay().toString()\n    this.currentDate = year + '-' + month + '-' + day;\n  }\n\n  ngOnInit() {\n    this.order\n      .getOrderList()//db list\n      .snapshotChanges()//key and value\n      //foreach changes return an object \n      .map(changes => {\n        return changes.map(c => ({\n          key: c.payload.key, ...c.payload.val()\n        }))\n      }).subscribe(\n        res => {\n          this.orders = res;\n\n        },\n        error => {\n          console.log('error');\n        });\n\n\n\n  }\n\n  accordionClick(event: any, index: number, p: Panier) {\n\n    let panel = <HTMLElement>document.getElementsByClassName('panel')[index];\n    console.log(panel);\n    event.target.classList.toggle('active');\n    if (panel.style.maxHeight) {\n      panel.style.maxHeight = null;\n    } else {\n      panel.style.maxHeight = panel.scrollHeight + 'px';\n    }\n  }\n\n\n  ionViewDidLoad() {\n\n  }\n\n\n  shownGroup = null;\n  toggleGroup(group) {\n    if (this.isGroupShown(group)) {\n      this.shownGroup = null;\n    } else {\n      this.shownGroup = group;\n    }\n  };\n  isGroupShown(group) {\n    return this.shownGroup === group;\n  };\n\n\n\n\n\n  onRemove(p) {\n    var j = 0;\n    var i = 0;\n    for (let order of this.orders) {\n      if (this.ord.key == order.key) {\n        for (let pan of this.ord.panier) {\n          this.paniers.push(pan);\n        }\n        for (let pan of this.ord.panier) {\n          if (pan.key == p.key) {\n            this.paniers.splice(j, 1);\n            \n            if(this.paniers.length==0){\n              this.order.remove(this.ord);\n            }\n            else{\n            this.ord.panier=this.paniers;\n            this.order.editItem(this.ord);}\n            break;\n          }\n          j++;\n        }\n      }\n    }\n    /* for (let pan of this.orders[i].panier) {\n       if(pan==o){\n         console.log(pan);\n       }\n       \n    \n     }\n }*/\n    //this.toast.show('commande supprimer avec succes');\n    //this.navCtrl.setRoot('OrdersPage');\n\n\n  }\n\n\n  onEditItem(p: Panier) {\n    this.panier.editItem(p);\n    this.toast.show(`Commande modifie avec succes!`);\n    this.navCtrl.setRoot('PanierPage');\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/cafeteria/StudentCafeteria/product-details/product-details.ts"],"sourceRoot":""}